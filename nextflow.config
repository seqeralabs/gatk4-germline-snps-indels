manifest {
    name = 'GATK4 Germline SNP and Indel Analysis'
    description = 'Workflow for germline short variant discovery using GATK4'
    version = '0.0.1'
    author = 'Evan Floden <evan@seqera.io>; Abhinav Sharma <abhi18av@outlook.com>'
    mainScript = 'gatk4-germline-snps-indels.nf'
    defaultBranch = 'master'
    homePage = 'https://github.com/seqeralabs/gatk4-germline-snps-indels'
    nextflowVersion = '>=20.07.1'
}

process.errorStrategy = 'retry'
process.maxRetries = 3

process.errorStrategy = 'retry'


profiles {
    dockerhub {
        process {
            errorStrategy = 'retry'
            ext.registry = 'https://hub.docker.com/r/seqeralabs/'
        }

        docker {
            enabled = true
            fixOwnership = true
        }

    }


    ecr {
        workDir = 's3://rnaseq-nf/work' // <- replace with your own bucket!

        process {
            ext.registry = 'ecr.io'
            ext.project = 'rnaseq-nf-project'
        }
    }


    gcr {
        workDir = 'gs://rnaseq-nf/work' // <- replace with your own bucket!

        google.project = 'rnaseq-nf-project'
        google.zone = 'europe-west2-c'

        process {
            ext.registry = 'gcr.io'
            ext.project = 'rnaseq-nf-project'

            withName:
            "GATK_PAIRED_FASTQ_TO_UNMAPPED_BAM" {
                container = "${ext.registry}/gatk4"
            }
        }
    }


    slurm {
        process {
            errorStrategy = 'retry'
            container = 'quay.io/nextflow/rnaseq-nf:latest'
            executor = 'slurm'
        }
    }

    awsbatch {
        workDir = 's3://rnaseq-nf/work' // <- replace with your own bucket!

        process {
            errorStrategy = 'retry'
            container = 'quay.io/nextflow/rnaseq-nf:latest'
            executor = 'awsbatch'
        }

        aws {
            region = 'eu-west-1'
            batch.cliPath = '/home/ec2-user/miniconda/bin/aws'
        }

    }

    googlelifescience {
        workDir = 'gs://rnaseq-nf/work' // <- replace with your own bucket!

        process {
            errorStrategy = 'retry'
            executor = 'google-lifesciences'
            container = 'quay.io/nextflow/rnaseq-nf:latest'
        }

        google.region = 'europe-west2-c'
    }


}

